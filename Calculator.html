<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <title>Calculate us!</title>
    <link rel="stylesheet" href="/css/calculator.css" />
  </head>

  <body>
    <table class="calculator">
      <tr>
        <th colspan="4" class="upper" id="change">Try the calculator!</th>
      </tr>

      <tr>
        <td colspan="3">
          <input class="display-box" type="text" id="result" disabled />
        </td>
        <td>
          <input type="button" value="C" onclick="clearScreen()" id="btn" />
        </td>
      </tr>
      <tr>
        <td><input type="button" value="1" onclick="display('1')" /></td>
        <td><input type="button" value="2" onclick="display('2')" /></td>
        <td><input type="button" value="3" onclick="display('3')" /></td>
        <td><input type="button" value="/" onclick="display('/')" /></td>
      </tr>
      <tr>
        <td><input type="button" value="4" onclick="display('4')" /></td>
        <td><input type="button" value="5" onclick="display('5')" /></td>
        <td><input type="button" value="6" onclick="display('6')" /></td>
        <td><input type="button" value="-" onclick="display('-')" /></td>
      </tr>
      <tr>
        <td><input type="button" value="7" onclick="display('7')" /></td>
        <td><input type="button" value="8" onclick="display('8')" /></td>
        <td><input type="button" value="9" onclick="display('9')" /></td>
        <td><input type="button" value="+" onclick="display('+')" /></td>
      </tr>
      <tr>
        <td><input type="button" value="." onclick="display('.')" /></td>
        <td><input type="button" value="0" onclick="display('0')" /></td>
        <td>

          <a href="#myModal" id="equalsButton">
            <input
              class="final"
              type="button"
              value="="
              onclick="calculate();"
              id="btn-equals"
            />
          </a>
        </td>
        <td><input type="button" value="*" onclick="display('*')" /></td>
      </tr>
    </table>

<!-- Modal structure -->
<div id="myModal" class="modal">
  <div class="modal-content">
    <h2>IMPORTANT MESSAGE</h2>
    <p>baks i love you so much baks mamatay man</p>
    <div class="modal-buttons">
      <button class="close-button" onclick="hideModal()">Close</button>
      <button class="submit-button" onclick="location.href='first.html'">Back Home</button>
    </div>
  </div>
</div>


    <script type="text/javascript">
      let tryCount = 0; // Track calculation attempts

      function clearScreen() {
        document.getElementById("result").value = "";
      }

      function change() {
        clearScreen();
        document.getElementById("change").innerHTML = "Try it again!";
      }

      function finalChange() {
        document.getElementsByClassName("final").innerHTML = "LOVE YOU LODS"
      }

      function showModal() {
        document.getElementById("myModal").style.display = "block";
      }

      function hideModal() {
        document.getElementById("myModal").style.display = "none";
      }

      function display(value) {
        document.getElementById("result").value += value;
      }

      function calculate() {
        const resultField = document.getElementById("result");
        const expression = resultField.value;

        try {
          const result = eval(expression);
          resultField.value = result;
          tryCount += 1;

          if (tryCount === 1) {
            change(); // First try: display result and change string
          } else if (tryCount === 2) {
            showModal(); // Second try: show the modal
            clearScreen();
            finalChange();
          }

        } catch (error) {
          resultField.value = "Error";
        }
      }
    </script>
  </body>
</html>
